{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\shighi\\\\farmwork-hub\\\\client\\\\src\\\\contexts\\\\AuthContext.tsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useReducer, useEffect } from 'react';\nimport { STORAGE_KEYS, ERROR_MESSAGES } from '../utils/constants';\nimport { validateEmail, validatePassword } from '../utils/validators';\n\n// Demo user data for fallback before backend setup\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEMO_USERS = [{\n  id: '1',\n  email: 'worker@farmwork.com',\n  firstName: 'John',\n  lastName: 'Ochieng',\n  phoneNumber: '+254712345678',\n  location: 'Nairobi, Kenya',\n  userType: 'worker',\n  profilePicture: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',\n  bio: 'Experienced farm worker with 5 years in crop cultivation and livestock management.',\n  skills: ['Crop Cultivation', 'Livestock Management', 'Irrigation Systems'],\n  isVerified: true,\n  rating: 4.8,\n  totalRatings: 24,\n  createdAt: new Date('2024-01-15'),\n  updatedAt: new Date('2024-06-20')\n}, {\n  id: '2',\n  email: 'employer@farmwork.com',\n  firstName: 'Sarah',\n  lastName: 'Mwangi',\n  phoneNumber: '+254723456789',\n  location: 'Nakuru, Kenya',\n  userType: 'employer',\n  profilePicture: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face',\n  bio: 'Owner of Green Valley Farm. Looking for dedicated workers to join our agricultural operations.',\n  skills: [],\n  isVerified: true,\n  rating: 4.9,\n  totalRatings: 18,\n  createdAt: new Date('2024-02-10'),\n  updatedAt: new Date('2024-06-25')\n}, {\n  id: '3',\n  email: 'admin@farmwork.com',\n  firstName: 'David',\n  lastName: 'Kipkoech',\n  phoneNumber: '+254734567890',\n  location: 'Eldoret, Kenya',\n  userType: 'admin',\n  profilePicture: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',\n  bio: 'FarmWork Hub Administrator',\n  skills: [],\n  isVerified: true,\n  rating: 5.0,\n  totalRatings: 5,\n  createdAt: new Date('2024-01-01'),\n  updatedAt: new Date('2024-06-30')\n}];\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  isLoading: false,\n  error: null\n};\nfunction authReducer(state, action) {\n  switch (action.type) {\n    case 'AUTH_START':\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    case 'AUTH_SUCCESS':\n      return {\n        ...state,\n        user: action.payload,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null\n      };\n    case 'AUTH_FAILURE':\n      return {\n        ...state,\n        user: null,\n        isAuthenticated: false,\n        isLoading: false,\n        error: action.payload\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        user: null,\n        isAuthenticated: false,\n        isLoading: false,\n        error: null\n      };\n    case 'UPDATE_USER':\n      return {\n        ...state,\n        user: state.user ? {\n          ...state.user,\n          ...action.payload\n        } : null\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n    default:\n      return state;\n  }\n}\n// Create context with proper typing\nexport const AuthContext = /*#__PURE__*/createContext(null);\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  // Initialize auth state from localStorage on mount\n  useEffect(() => {\n    const initializeAuth = () => {\n      try {\n        const token = localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);\n        const userData = localStorage.getItem(STORAGE_KEYS.USER_DATA);\n        if (token && userData) {\n          const user = JSON.parse(userData);\n          // In production, you would validate the token with the backend\n          dispatch({\n            type: 'AUTH_SUCCESS',\n            payload: user\n          });\n        }\n      } catch (error) {\n        console.error('Error initializing auth:', error);\n        // Clear invalid data\n        localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);\n        localStorage.removeItem(STORAGE_KEYS.USER_DATA);\n      }\n    };\n    initializeAuth();\n  }, []);\n  const login = async credentials => {\n    dispatch({\n      type: 'AUTH_START'\n    });\n    try {\n      // Validate input\n      if (!validateEmail(credentials.email)) {\n        throw new Error('Please enter a valid email address');\n      }\n      if (!credentials.password) {\n        throw new Error('Password is required');\n      }\n\n      // Demo authentication - replace with actual API call\n      await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API delay\n\n      const user = DEMO_USERS.find(u => u.email === credentials.email);\n      if (!user) {\n        throw new Error('Invalid email or password');\n      }\n\n      // Demo password check (in production, this would be handled by backend)\n      if (credentials.password !== 'password123') {\n        throw new Error('Invalid email or password');\n      }\n\n      // Store auth data\n      const token = `demo_token_${user.id}_${Date.now()}`;\n      localStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, token);\n      localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(user));\n      dispatch({\n        type: 'AUTH_SUCCESS',\n        payload: user\n      });\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : ERROR_MESSAGES.SERVER_ERROR;\n      dispatch({\n        type: 'AUTH_FAILURE',\n        payload: errorMessage\n      });\n      throw error;\n    }\n  };\n  const register = async data => {\n    dispatch({\n      type: 'AUTH_START'\n    });\n    try {\n      var _data$firstName, _data$lastName, _data$phoneNumber;\n      // Validate input\n      if (!validateEmail(data.email)) {\n        throw new Error('Please enter a valid email address');\n      }\n      if (!validatePassword(data.password)) {\n        throw new Error(`Password must be at least 8 characters long`);\n      }\n      if (data.password !== data.confirmPassword) {\n        throw new Error('Passwords do not match');\n      }\n      if (!((_data$firstName = data.firstName) !== null && _data$firstName !== void 0 && _data$firstName.trim()) || !((_data$lastName = data.lastName) !== null && _data$lastName !== void 0 && _data$lastName.trim())) {\n        throw new Error('First name and last name are required');\n      }\n      if (!((_data$phoneNumber = data.phoneNumber) !== null && _data$phoneNumber !== void 0 && _data$phoneNumber.trim())) {\n        throw new Error('Phone number is required');\n      }\n      if (!data.userType) {\n        throw new Error('Please select a user type');\n      }\n\n      // Demo registration - replace with actual API call\n      await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate API delay\n\n      // Check if email already exists\n      const existingUser = DEMO_USERS.find(u => u.email === data.email);\n      if (existingUser) {\n        throw new Error('Email address is already registered');\n      }\n\n      // Create new user\n      const newUser = {\n        id: `demo_${Date.now()}`,\n        email: data.email,\n        firstName: data.firstName,\n        lastName: data.lastName,\n        phoneNumber: data.phoneNumber,\n        location: data.location || '',\n        userType: data.userType,\n        profilePicture: '',\n        bio: '',\n        skills: [],\n        isVerified: false,\n        rating: 0,\n        totalRatings: 0,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n\n      // Store auth data\n      const token = `demo_token_${newUser.id}_${Date.now()}`;\n      localStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, token);\n      localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(newUser));\n      dispatch({\n        type: 'AUTH_SUCCESS',\n        payload: newUser\n      });\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Registration failed';\n      dispatch({\n        type: 'AUTH_FAILURE',\n        payload: errorMessage\n      });\n      throw error;\n    }\n  };\n  const logout = () => {\n    // Clear auth data\n    localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);\n    localStorage.removeItem(STORAGE_KEYS.USER_DATA);\n\n    // Clear other user-specific data\n    localStorage.removeItem(STORAGE_KEYS.SEARCH_FILTERS);\n    dispatch({\n      type: 'LOGOUT'\n    });\n  };\n  const updateProfile = async data => {\n    if (!state.user) {\n      throw new Error('User not authenticated');\n    }\n    try {\n      // Demo profile update - replace with actual API call\n      await new Promise(resolve => setTimeout(resolve, 800));\n      const updatedUser = {\n        ...state.user,\n        ...data,\n        updatedAt: new Date()\n      };\n\n      // Update localStorage\n      localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(updatedUser));\n      dispatch({\n        type: 'UPDATE_USER',\n        payload: data\n      });\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to update profile';\n      throw new Error(errorMessage);\n    }\n  };\n  const forgotPassword = async email => {\n    try {\n      if (!validateEmail(email)) {\n        throw new Error('Please enter a valid email address');\n      }\n\n      // Demo forgot password - replace with actual API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // In demo mode, we'll just simulate success\n      // In production, this would send an email with reset link\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to send reset email';\n      throw new Error(errorMessage);\n    }\n  };\n  const resetPassword = async (token, password) => {\n    try {\n      if (!validatePassword(password)) {\n        throw new Error('Password must be at least 8 characters long');\n      }\n\n      // Demo password reset - replace with actual API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // In production, this would validate the token and update the password\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to reset password';\n      throw new Error(errorMessage);\n    }\n  };\n  const clearError = () => {\n    dispatch({\n      type: 'CLEAR_ERROR'\n    });\n  };\n  const value = {\n    ...state,\n    login,\n    register,\n    logout,\n    updateProfile,\n    forgotPassword,\n    resetPassword,\n    clearError\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 10\n  }, this);\n}\n\n// Demo credentials for testing:\n// Email: worker@farmwork.com or employer@farmwork.com or admin@farmwork.com\n// Password: password123\n_s(AuthProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useReducer","useEffect","STORAGE_KEYS","ERROR_MESSAGES","validateEmail","validatePassword","jsxDEV","_jsxDEV","DEMO_USERS","id","email","firstName","lastName","phoneNumber","location","userType","profilePicture","bio","skills","isVerified","rating","totalRatings","createdAt","Date","updatedAt","initialState","user","isAuthenticated","isLoading","error","authReducer","state","action","type","payload","AuthContext","AuthProvider","children","_s","dispatch","initializeAuth","token","localStorage","getItem","AUTH_TOKEN","userData","USER_DATA","JSON","parse","console","removeItem","login","credentials","Error","password","Promise","resolve","setTimeout","find","u","now","setItem","stringify","errorMessage","message","SERVER_ERROR","register","data","_data$firstName","_data$lastName","_data$phoneNumber","confirmPassword","trim","existingUser","newUser","logout","SEARCH_FILTERS","updateProfile","updatedUser","forgotPassword","resetPassword","clearError","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/shighi/farmwork-hub/client/src/contexts/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';\r\nimport { User, LoginCredentials, RegisterData } from '../types/auth';\r\nimport { STORAGE_KEYS, ERROR_MESSAGES, SUCCESS_MESSAGES } from '../utils/constants';\r\nimport { validateEmail, validatePassword } from '../utils/validators';\r\n\r\n// Demo user data for fallback before backend setup\r\nconst DEMO_USERS = [\r\n  {\r\n    id: '1',\r\n    email: 'worker@farmwork.com',\r\n    firstName: 'John',\r\n    lastName: 'Ochieng',\r\n    phoneNumber: '+254712345678',\r\n    location: 'Nairobi, Kenya',\r\n    userType: 'worker' as const,\r\n    profilePicture: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',\r\n    bio: 'Experienced farm worker with 5 years in crop cultivation and livestock management.',\r\n    skills: ['Crop Cultivation', 'Livestock Management', 'Irrigation Systems'],\r\n    isVerified: true,\r\n    rating: 4.8,\r\n    totalRatings: 24,\r\n    createdAt: new Date('2024-01-15'),\r\n    updatedAt: new Date('2024-06-20'),\r\n  },\r\n  {\r\n    id: '2',\r\n    email: 'employer@farmwork.com',\r\n    firstName: 'Sarah',\r\n    lastName: 'Mwangi',\r\n    phoneNumber: '+254723456789',\r\n    location: 'Nakuru, Kenya',\r\n    userType: 'employer' as const,\r\n    profilePicture: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face',\r\n    bio: 'Owner of Green Valley Farm. Looking for dedicated workers to join our agricultural operations.',\r\n    skills: [],\r\n    isVerified: true,\r\n    rating: 4.9,\r\n    totalRatings: 18,\r\n    createdAt: new Date('2024-02-10'),\r\n    updatedAt: new Date('2024-06-25'),\r\n  },\r\n  {\r\n    id: '3',\r\n    email: 'admin@farmwork.com',\r\n    firstName: 'David',\r\n    lastName: 'Kipkoech',\r\n    phoneNumber: '+254734567890',\r\n    location: 'Eldoret, Kenya',\r\n    userType: 'admin' as const,\r\n    profilePicture: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',\r\n    bio: 'FarmWork Hub Administrator',\r\n    skills: [],\r\n    isVerified: true,\r\n    rating: 5.0,\r\n    totalRatings: 5,\r\n    createdAt: new Date('2024-01-01'),\r\n    updatedAt: new Date('2024-06-30'),\r\n  },\r\n];\r\n\r\ninterface AuthState {\r\n  user: User | null;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n}\r\n\r\ntype AuthAction =\r\n  | { type: 'AUTH_START' }\r\n  | { type: 'AUTH_SUCCESS'; payload: User }\r\n  | { type: 'AUTH_FAILURE'; payload: string }\r\n  | { type: 'LOGOUT' }\r\n  | { type: 'UPDATE_USER'; payload: Partial<User> }\r\n  | { type: 'CLEAR_ERROR' };\r\n\r\nconst initialState: AuthState = {\r\n  user: null,\r\n  isAuthenticated: false,\r\n  isLoading: false,\r\n  error: null,\r\n};\r\n\r\nfunction authReducer(state: AuthState, action: AuthAction): AuthState {\r\n  switch (action.type) {\r\n    case 'AUTH_START':\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null,\r\n      };\r\n    case 'AUTH_SUCCESS':\r\n      return {\r\n        ...state,\r\n        user: action.payload,\r\n        isAuthenticated: true,\r\n        isLoading: false,\r\n        error: null,\r\n      };\r\n    case 'AUTH_FAILURE':\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: action.payload,\r\n      };\r\n    case 'LOGOUT':\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: null,\r\n      };\r\n    case 'UPDATE_USER':\r\n      return {\r\n        ...state,\r\n        user: state.user ? { ...state.user, ...action.payload } : null,\r\n      };\r\n    case 'CLEAR_ERROR':\r\n      return {\r\n        ...state,\r\n        error: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport interface AuthContextValue extends AuthState {\r\n  login: (credentials: LoginCredentials) => Promise<void>;\r\n  register: (data: RegisterData) => Promise<void>;\r\n  logout: () => void;\r\n  updateProfile: (data: Partial<User>) => Promise<void>;\r\n  forgotPassword: (email: string) => Promise<void>;\r\n  resetPassword: (token: string, password: string) => Promise<void>;\r\n  clearError: () => void;\r\n}\r\n\r\n// Create context with proper typing\r\nexport const AuthContext = createContext<AuthContextValue | null>(null);\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport function AuthProvider({ children }: AuthProviderProps) {\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n  // Initialize auth state from localStorage on mount\r\n  useEffect(() => {\r\n    const initializeAuth = () => {\r\n      try {\r\n        const token = localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);\r\n        const userData = localStorage.getItem(STORAGE_KEYS.USER_DATA);\r\n\r\n        if (token && userData) {\r\n          const user = JSON.parse(userData);\r\n          // In production, you would validate the token with the backend\r\n          dispatch({ type: 'AUTH_SUCCESS', payload: user });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error initializing auth:', error);\r\n        // Clear invalid data\r\n        localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);\r\n        localStorage.removeItem(STORAGE_KEYS.USER_DATA);\r\n      }\r\n    };\r\n\r\n    initializeAuth();\r\n  }, []);\r\n\r\n  const login = async (credentials: LoginCredentials) => {\r\n    dispatch({ type: 'AUTH_START' });\r\n\r\n    try {\r\n      // Validate input\r\n      if (!validateEmail(credentials.email)) {\r\n        throw new Error('Please enter a valid email address');\r\n      }\r\n\r\n      if (!credentials.password) {\r\n        throw new Error('Password is required');\r\n      }\r\n\r\n      // Demo authentication - replace with actual API call\r\n      await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API delay\r\n\r\n      const user = DEMO_USERS.find(u => u.email === credentials.email);\r\n      \r\n      if (!user) {\r\n        throw new Error('Invalid email or password');\r\n      }\r\n\r\n      // Demo password check (in production, this would be handled by backend)\r\n      if (credentials.password !== 'password123') {\r\n        throw new Error('Invalid email or password');\r\n      }\r\n\r\n      // Store auth data\r\n      const token = `demo_token_${user.id}_${Date.now()}`;\r\n      localStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, token);\r\n      localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(user));\r\n\r\n      dispatch({ type: 'AUTH_SUCCESS', payload: user });\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : ERROR_MESSAGES.SERVER_ERROR;\r\n      dispatch({ type: 'AUTH_FAILURE', payload: errorMessage });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const register = async (data: RegisterData) => {\r\n    dispatch({ type: 'AUTH_START' });\r\n\r\n    try {\r\n      // Validate input\r\n      if (!validateEmail(data.email)) {\r\n        throw new Error('Please enter a valid email address');\r\n      }\r\n\r\n      if (!validatePassword(data.password)) {\r\n        throw new Error(`Password must be at least 8 characters long`);\r\n      }\r\n\r\n      if (data.password !== data.confirmPassword) {\r\n        throw new Error('Passwords do not match');\r\n      }\r\n\r\n      if (!data.firstName?.trim() || !data.lastName?.trim()) {\r\n        throw new Error('First name and last name are required');\r\n      }\r\n\r\n      if (!data.phoneNumber?.trim()) {\r\n        throw new Error('Phone number is required');\r\n      }\r\n\r\n      if (!data.userType) {\r\n        throw new Error('Please select a user type');\r\n      }\r\n\r\n      // Demo registration - replace with actual API call\r\n      await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate API delay\r\n\r\n      // Check if email already exists\r\n      const existingUser = DEMO_USERS.find(u => u.email === data.email);\r\n      if (existingUser) {\r\n        throw new Error('Email address is already registered');\r\n      }\r\n\r\n      // Create new user\r\n      const newUser: User = {\r\n        id: `demo_${Date.now()}`,\r\n        email: data.email,\r\n        firstName: data.firstName,\r\n        lastName: data.lastName,\r\n        phoneNumber: data.phoneNumber,\r\n        location: data.location || '',\r\n        userType: data.userType,\r\n        profilePicture: '',\r\n        bio: '',\r\n        skills: [],\r\n        isVerified: false,\r\n        rating: 0,\r\n        totalRatings: 0,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n      };\r\n\r\n      // Store auth data\r\n      const token = `demo_token_${newUser.id}_${Date.now()}`;\r\n      localStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, token);\r\n      localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(newUser));\r\n\r\n      dispatch({ type: 'AUTH_SUCCESS', payload: newUser });\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Registration failed';\r\n      dispatch({ type: 'AUTH_FAILURE', payload: errorMessage });\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    // Clear auth data\r\n    localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);\r\n    localStorage.removeItem(STORAGE_KEYS.USER_DATA);\r\n    \r\n    // Clear other user-specific data\r\n    localStorage.removeItem(STORAGE_KEYS.SEARCH_FILTERS);\r\n\r\n    dispatch({ type: 'LOGOUT' });\r\n  };\r\n\r\n  const updateProfile = async (data: Partial<User>) => {\r\n    if (!state.user) {\r\n      throw new Error('User not authenticated');\r\n    }\r\n\r\n    try {\r\n      // Demo profile update - replace with actual API call\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n\r\n      const updatedUser = {\r\n        ...state.user,\r\n        ...data,\r\n        updatedAt: new Date(),\r\n      };\r\n\r\n      // Update localStorage\r\n      localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(updatedUser));\r\n\r\n      dispatch({ type: 'UPDATE_USER', payload: data });\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to update profile';\r\n      throw new Error(errorMessage);\r\n    }\r\n  };\r\n\r\n  const forgotPassword = async (email: string) => {\r\n    try {\r\n      if (!validateEmail(email)) {\r\n        throw new Error('Please enter a valid email address');\r\n      }\r\n\r\n      // Demo forgot password - replace with actual API call\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n      // In demo mode, we'll just simulate success\r\n      // In production, this would send an email with reset link\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to send reset email';\r\n      throw new Error(errorMessage);\r\n    }\r\n  };\r\n\r\n  const resetPassword = async (token: string, password: string) => {\r\n    try {\r\n      if (!validatePassword(password)) {\r\n        throw new Error('Password must be at least 8 characters long');\r\n      }\r\n\r\n      // Demo password reset - replace with actual API call\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n      // In production, this would validate the token and update the password\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Failed to reset password';\r\n      throw new Error(errorMessage);\r\n    }\r\n  };\r\n\r\n  const clearError = () => {\r\n    dispatch({ type: 'CLEAR_ERROR' });\r\n  };\r\n\r\n  const value: AuthContextValue = {\r\n    ...state,\r\n    login,\r\n    register,\r\n    logout,\r\n    updateProfile,\r\n    forgotPassword,\r\n    resetPassword,\r\n    clearError,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\n// Demo credentials for testing:\r\n// Email: worker@farmwork.com or employer@farmwork.com or admin@farmwork.com\r\n// Password: password123"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}